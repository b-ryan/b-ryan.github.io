<!DOCTYPE html>
<html lang="en">
  <head>


    <meta name="tags" contents="chrome" />
    <meta name="tags" contents="extension" />
    <meta name="tags" contents="amazon" />
    <meta name="tags" contents="autofocus" />
    <meta name="tags" contents="javascript" />


    <meta charset="utf-8" />
    <meta name="viewport" content="width-device-width, initial-scale=1.0">

    <script type="text/javascript"
      src="http://b-ryan.github.io/theme/lib/jquery/jquery-1.10.2.min.js"></script>
    <script type="text/javascript"
      src="http://b-ryan.github.io/theme/lib/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css"
      href="http://b-ryan.github.io/theme/lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
      href="http://b-ryan.github.io/theme/css/layout.css">
    <link rel="stylesheet" type="text/css"
      href="http://b-ryan.github.io/theme/css/theme.css">
  </head>

  <body>

    <nav class="navbar navbar-default" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button
          type="button"
          class="navbar-toggle"
          data-toggle="collapse"
          data-target="#navbar-collapse"
        >
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://b-ryan.github.io">
          buckryan.com
        </a>
      </div>

      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav">

            <li >
              <a href="http://b-ryan.github.io/pages/about-me.html">about me</a>
            </li>

        </ul>
      </div>

    </div>
    </nav>

    <div class="container">
  <section id="content" class="body">

    <header>
      <h2 class="entry-title">
        <a
          href="http://b-ryan.github.io/automatically-focus-on-amazons-search-bar.html"
          rel="bookmark"
          title="Permalink to Automatically Focus on Amazon's Search Bar"
        >Automatically Focus on Amazon's Search Bar</a>
      </h2>
      
    </header>

    <footer class="post-info">
      <span>
        2013-03-07
      </span>
        <address class="vcard author">
        </address>
    </footer>

    <div class="entry-content">
      <p>Whenever I visit Amazon's homepage, I do so hoping to search for things. I'm
not one to browse around and I'm sure many others are the same. However, I get
annoyed each time this happens because the search bar does not have the focus
when you visit the homepage. After coming across a
<a href="http://news.ycombinator.com/item?id=5333209">comment</a> on Hacker News
describing the same problem, I realized I could fix this with a pretty simple
Chrome extension. Check it out
<a href="https://chrome.google.com/webstore/detail/amazon-search-auto-focus/mlblghbllacignpjknjbpbefjmgnbpca">here</a>
and read on for a short description of how I put it together.</p>
<p>About one or two years back, I was interested in making extensions for Chrome,
but never went very far with it. However, the brief foray meant that yesterday,
I knew the basics I would need to make the extension. The most important part
of this is the <a href="http://developer.chrome.com/extensions/manifest.html">manifest</a>,
which describes your extension, lists the permissions it needs, files it
contains, and so forth.</p>
<p>The manifest for this app was really simple:</p>
<div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;manifest_version&quot;</span><span class="o">:</span> <span class="m">2</span><span class="o">,</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Amazon Search AutoFocus&quot;</span><span class="o">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Automatically focus on search bar when visiting Amazon&quot;</span><span class="o">,</span>
    <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="o">,</span>
    <span class="s2">&quot;permissions&quot;</span><span class="o">:</span> <span class="cp">[</span>
        <span class="s2">&quot;http://*.amazon.com/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;https://*.amazon.com/&quot;</span>
    <span class="cp">]</span><span class="o">,</span>
    <span class="s2">&quot;content_scripts&quot;</span><span class="o">:</span> <span class="cp">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;matches&quot;</span><span class="p">:</span> <span class="err">[</span><span class="s2">&quot;http://*.amazon.com/&quot;</span><span class="cp">]</span><span class="o">,</span>
            <span class="s2">&quot;js&quot;</span><span class="o">:</span> <span class="cp">[</span><span class="s2">&quot;script.js&quot;</span><span class="cp">]</span>
        <span class="p">}</span>
    <span class="o">]</span>
<span class="err">}</span>
</pre></div>


<p>Most of this is pretty obvious. The documentation on the
<a href="http://developer.chrome.com/extensions/manifest.html#manifest_version">manifest_version</a>
indicates that version 1 is deprecate. The version indicated lets Google
manage the extension among users. This number will be used to determine if a
user is on an older version of the extension and it needs to be updated.</p>
<p>Permissions are bit complicated, as they can include whether the extension
can operate on tabs or windows, have access to sites, etc. For this really
simple app, I only need to indicate that I want access to the amazon sites.</p>
<p>Finally, the hardest part of it all was figuring out how to get some javascript
to run when I visited Amazon's homepage. Using some Google-foo, I discovered
that <a href="http://developer.chrome.com/extensions/content_scripts.html">Content Scripts</a>
are the way to do this. As the documentation says, <code>content scripts run in the
context of web pages</code>. This means the javascript file specified above
(script.js) will be run when Amazon loads. This is exactly what I wanted!</p>
<p>So finally I just needed to write the javascript. It turned out to be dead
simple. Here's the only line needed:</p>
<div class="highlight"><pre><span class="n">document</span><span class="p">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;twotabsearchtextbox&quot;</span><span class="p">).</span><span class="n">focus</span><span class="p">();</span>
</pre></div>


<p>I briefly examined Amazon's search box using the Chrome
<a href="https://developers.google.com/chrome-developer-tools/docs/elements">developer tools</a>
and I saw that the ID of the search box was <code>twotabsearchtextbox</code>. So I used
some native javascript functions to set the focus and it was done!</p>
<p>Hopefully this helps if you want to write your own Chrome extension! If I make
any changes or improvements to this, the updated code will be
<a href="https://bitbucket.org/b_ryan/amazon-autofocus">on Bitbucket</a> for your viewing
pleasure.</p>
    </div>
  </section>
    </div>


  </body>
</html>